<div class="_header">

  <div class="_left">

    <div class="_title">
      <h2>{{ title }}</h2>
    </div>

    <div class="_pin">
      <button appButton isCircle withIcon="left" size="extra-small" (click)="onTogglePin()">
        <mat-icon>{{ isPinned ? 'clear' : 'push_pin' }}</mat-icon>
        {{ isPinned ? 'Unpin' : 'Pin' }}
      </button>
    </div>
  </div>

  <div class="_right">
    <app-actions-menu
      [id]="title + '-menu'"
      [actions]="listActions"
      position="left"
      (actionConfirmed)="onListAction($event)"
    >
      <ng-container *appActionsMenuButton>
        <button type="button" appButton="ghost" withIconOnly isCircle size="small">
          <mat-icon>more_horiz</mat-icon>
        </button>
      </ng-container>
    </app-actions-menu>
  </div>

</div>

<ul class="_items">
  <li
    *ngFor="let item of items; let last = last; let index = index"
    class="_item"
    [class.-last]="last"
  >
    <div class="_item-header">

      <div class="_left" (click)="theCheckbox.toggle()">
          <div class="_item-info">
          <app-checkbox
            #theCheckbox="app-checkbox"
            [id]="item.id"
            [checked]="item.isDone"
            color="black"
            (changed)="onToggleItem(item.id, $event)"
          >
            <span [class.-crossed]="item.isDone">
              {{ item.amount }}x {{ item.name }}
            </span>
          </app-checkbox>
        </div>
      </div>

      <div class="_right">

        <!-- Show/hide description -->
        <div class="_toggle-description">
          <button
            type="button"
            appButton="ghost"
            withIconOnly
            isCircle
            size="small"
          >
            <mat-icon>notes</mat-icon>
          </button>
        </div>

        <app-actions-menu
          [id]="item.id + '-menu'"
          [actions]="actionsMap.get(index) ?? []"
          position="left"
          offsetY="-2rem"
          (actionConfirmed)="onItemAction(item.id, $event)"
        >
          <ng-container *appActionsMenuButton>
            <button type="button" appButton="outline" withIconOnly isCircle size="small">
              <mat-icon>more_horiz</mat-icon>
            </button>
          </ng-container>
        </app-actions-menu>

      </div>

    </div>
  </li>
</ul>
