<ng-container *ngIf="vm$ | async as vm">

  <!-- Filters -->
  <ul *ngIf="vm.filters" class="_filters">
    <li *ngFor="let filter of vm.filters">
      <button
        type="button"
        appButton="secondary"
        withIcon="left"
        size="extra-small"
        (click)="onRemoveFilter(filter)"
      >
        <mat-icon>clear</mat-icon>
        {{ filter.value }}
      </button>
    </li>
  </ul>

  <!-- Items -->
  <ul *ngIf="vm.itemGroups.length" class="_cards">
    <li *ngFor="let group of vm.itemGroups; trackBy: trackByCategory">
      <app-card-list
        [title]="group.category"
        [items]="group.items"
        [listActions]="CATEGORY_CONTEXTUAL_MENU"
        [itemActionsFn]="getItemContextualMenu"
        [isPinned]="vm.pinnedCategory === group.category"
        (listActionClicked)="onCategoryAction(group.category, $event)"
        (itemActionClicked)="onItemAction($event)"
        (itemToggled)="onItemToggle($event)"
        (pinned)="onPinCategory(group.category, $event)"
      />
    </li>
  </ul>

</ng-container>